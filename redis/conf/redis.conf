# Redis 配置文件

# 绑定地址，0.0.0.0 表示监听所有网络接口
bind 0.0.0.0

# 保护模式，yes 表示开启，防止未授权访问
protected-mode yes

# Redis 服务端口号
port 6379

# 持久化策略：只使用 RDB
# 是否开启 AOF 持久化，no 表示禁用
appendonly no

# RDB 配置

# 15分钟内至少1个key变化时触发RDB持久化
save 900 1

# 5分钟内至少10个key变化时触发RDB持久化
save 300 10

# 1分钟内至少10000个key变化时触发RDB持久化
save 60 10000

# 当后台 RDB 保存失败时，Redis 是否停止接收写操作
stop-writes-on-bgsave-error yes

# 是否对 RDB 文件进行压缩
rdbcompression yes

# 是否在 RDB 文件末尾添加 CRC64 校验和
rdbchecksum no

# RDB 快照文件名
dbfilename dump.rdb

# Redis 数据目录
dir /data

# 内存管理

# 设置 Redis 最大可用内存，超过这个限制会触发淘汰策略
maxmemory 4gb

# 内存达到上限时的数据淘汰策略，allkeys-lru 表示所有键中淘汰最近最少使用的键
maxmemory-policy allkeys-lru

# 性能配置

# Lua 脚本执行的最大时间（毫秒）
lua-time-limit 5000

# 慢查询日志阈值（微秒）
slowlog-log-slower-than 10000

# 慢查询日志最大长度
slowlog-max-len 128

# 客户端空闲超时时间（秒），0 表示永不超时
timeout 0

# TCP 保活间隔（秒）
tcp-keepalive 300

# 网络配置

# 设置TCP连接队列的长度，根据somaxconn设置调整： cat /proc/sys/net/core/somaxconn
# tcp-backlog 511

# 日志配置

# 日志级别，notice 表示普通重要事件
loglevel notice

# 日志输出位置，空字符串表示输出到标准输出（stdout），"/logs/redis.log" 表示输出到文件
logfile ""

# 连接限制配置

# 最大客户端连接数
maxclients 10000